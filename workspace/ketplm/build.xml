<?xml version="1.0" encoding="UTF-8"?>
<project name="Build for APT(Annotation Processor Tool)" default="build.apt" basedir=".">
	<!-- ============================================================================== -->
	<!-- 	환경설정  시작															 	-->
	<!-- ============================================================================== -->
	<property environment="env"/>
	<property name="ptc.home" value="D:/ptc/Windchill_10.2"/>
	<property name="windchill.home" value="${ptc.home}/Windchill"/>
	<property name="windchill.lib" value="${windchill.home}/srclib"/>
	<property name="debuglevel" value="source,lines,vars"/>
	<property name="workspace.home" value="${env.WORKSPACE}/dap"/>
	<property name="build.src.dir" value="${workspace.home}/src"/>
	<property name="build.dest.dir" value="${windchill.home}/codebase"/>
	<property name="build.src.gen" value="${workspace.home}/src_gen"/>

	<path id="apt.factorypath">
		<fileset dir="${windchill.lib}">
			<include name="**/*.jar"/>
			<!-- <include name="org.springframework.web.jar"/>
			<include name="org.springframework.context.jar"/>  -->
		</fileset>
		<!-- <fileset dir="${windchill.lib}/tool">
			<include name="**/*.jar"/>
			<include name="AnnotationProcessing.jar"/>
			<include name="Annotations.jar"/>
      	</fileset>
		<fileset dir="${windchill.lib}/install">
			<include name="**/*.jar"/>
			<include name="InstallUtil.jar"/>
      	</fileset>
		<fileset dir="${windchill.home}/tomcat/lib">
			<include name="servlet-api.jar"/>
      	</fileset>
		<fileset dir="${ptc.home}/Java/jre/lib">
			<include name="rt.jar"/>
      	</fileset> -->
	</path>

	<path id="windchill.classpath">
		<fileset dir="${windchill.lib}">
			<include name="**/*.jar"/>
		</fileset>
		<fileset dir="${windchill.home}/tomcat/lib">
			<include name="servlet-api.jar"/>
		</fileset>
	</path>

	<!-- ============================================================================== -->
	<!-- 	target  시작															 																	-->
	<!-- ============================================================================== -->

	<!-- APT  build																	    															-->
	<!-- 반드시 compile = "true" 설정이 되어 있어야 *.java파일이 생성됩니다.															-->
	<!-- gen_src 폴더도 generation되어야 하므로 srcdir을 src_gen 폴더를 한번도 apt로 돌린다.									-->
	<target name="build.apt">

		<apt srcdir="${build.src.dir};${build.src.gen}"
			 destdir="${build.dest.dir}"
			 debug="on"
			 fork="yes"
			 debuglevel="${debuglevel}"
			 compile="true"
			 preprocessdir="${build.src.gen}"
			 factorypathref="apt.factorypath"
			 compiler="javac1.6"
			 encoding ="UTF-8"
			 includeantruntime="false"
			 failonerror="false"
			 classpath="
			 ${workspace.home}/codebase/;
			 ${workspace.home}/WEB-INF/lib/InnorixJAVA.jar;
			 ${windchill.home}/codebase/;
			 ${windchill.home}/lib/pdml.jar;
			 ${windchill.home}/lib/reql.jar;
			 ${windchill.home}/lib/servlet.jar;
			 ${windchill.home}/lib/wnc.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/wc3rdpartylibs.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/archiveClientWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/archiveServerWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/archiveWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/CounterPartWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/dpimpl.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/dpinfraWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/jmxcoreWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/pdmlWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/prowtWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/reqlWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/rialtoWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/wncWeb.jar;			 
			 ${windchill.home}/srclib/log4j.jar;
			 ${windchill.home}/srclib/json.jar;
			 ${windchill.home}/srclib/commons-beanutils.jar;
			 ${windchill.home}/srclib/commons-codec.jar;
			 ${windchill.home}/srclib/commons-digester.jar;
			 ${windchill.home}/srclib/commons-discovery.jar;
			 ${windchill.home}/srclib/commons-fileupload.jar;
			 ${windchill.home}/srclib/commons-httpclient.jar;
			 ${windchill.home}/srclib/commons-io.jar;
			 ${windchill.home}/srclib/commons-lang.jar;
			 ${windchill.home}/srclib/commons-logging.jar;
			 ${windchill.home}/srclib/commons-collections.jar;
			 ${windchill.home}/srclib/org.springframework.web.jar;
			 ${windchill.home}/srclib/org.springframework.context.jar;			 
			 ${windchill.home}/srclib/tool/AnnotationProcessing.jar;			 
			 ${windchill.home}/srclib/tool/Annotations.jar;			 	 
			 ${windchill.home}/srclib/install/InstallUtil.jar;
			 ${windchill.home}/srclib/wnc/CommonCore.jar;
			 ${windchill.home}/srclib/wnc/WtLogR.jar"
			 >
			<option name="gen_class_info" value="true"/>
			<option name="wt.home" value="${windchill.home}"/>
		</apt>
		<!-- apt srcdir="${build.src.gen}"
			 destdir="${build.dest.dir}"
			 debug="on"
			 fork="yes"
			 debuglevel="${debuglevel}"
			 compile="true"
			 preprocessdir="${build.src.gen}"
			 factorypathref="apt.factorypath"
			 compiler="javac1.6"
			 encoding ="UTF-8"
			 includeantruntime="false"
			 failonerror="false"
			 classpath="
			 ${workspace.home}/codebase/;
			 ${workspace.home}/WEB-INF/lib/InnorixJAVA.jar;
			 ${windchill.home}/codebase/;
			 ${windchill.home}/lib/pdml.jar;
			 ${windchill.home}/lib/reql.jar;
			 ${windchill.home}/lib/servlet.jar;
			 ${windchill.home}/lib/wnc.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/wc3rdpartylibs.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/archiveClientWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/archiveServerWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/archiveWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/CounterPartWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/dpimpl.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/dpinfraWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/jmxcoreWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/pdmlWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/prowtWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/reqlWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/rialtoWeb.jar;
			 ${windchill.home}/codebase/WEB-INF/lib/wncWeb.jar;			 
			 ${windchill.home}/srclib/log4j.jar;
			 ${windchill.home}/srclib/json.jar;
			 ${windchill.home}/srclib/commons-beanutils.jar;
			 ${windchill.home}/srclib/commons-codec.jar;
			 ${windchill.home}/srclib/commons-digester.jar;
			 ${windchill.home}/srclib/commons-discovery.jar;
			 ${windchill.home}/srclib/commons-fileupload.jar;
			 ${windchill.home}/srclib/commons-httpclient.jar;
			 ${windchill.home}/srclib/commons-io.jar;
			 ${windchill.home}/srclib/commons-lang.jar;
			 ${windchill.home}/srclib/commons-logging.jar;
			 ${windchill.home}/srclib/commons-collections.jar;
			 ${windchill.home}/srclib/org.springframework.web.jar;
			 ${windchill.home}/srclib/org.springframework.context.jar;			 
			 ${windchill.home}/srclib/tool/AnnotationProcessing.jar;			 
			 ${windchill.home}/srclib/tool/Annotations.jar;			 	 
			 ${windchill.home}/srclib/install/InstallUtil.jar;
			 ${windchill.home}/srclib/wnc/CommonCore.jar;
			 ${windchill.home}/srclib/wnc/WtLogR.jar"
			 >
			<option name="gen_class_info" value="true"/>
			<option name="wt.home" value="${windchill.home}"/>
		</apt-->
	</target>

	<target name="wc.onzip">
		<jar destfile="lib/wc10.2M020.jar">
			<zipfileset dir="${windchill.home}/codebase" includes="**/*.jar"></zipfileset>
			<zipfileset dir="${windchill.home}/srclib" includes="**/*.jar"></zipfileset>
			<zipfileset dir="${windchill.home}/lib" includes="**/*.jar"></zipfileset>
			<!--<zipgroupfileset dir="${windchill.home}" excludes="*" includes="**/*.jar"/>-->
		</jar>
	</target>
</project>